<!--pages/notice/notice.wxml-->
<view class="notice-container">

  <!-- é€šçŸ¥åˆ—è¡¨ -->
  <scroll-view class="notice-list" scroll-y="true" refresher-enabled="true" 
               bindrefresherrefresh="onPullDownRefresh" refresher-triggered="{{loading}}">
    
    <!-- é€šçŸ¥å¡ç‰‡ -->
    <view class="notice-item" wx:for="{{notices}}" wx:key="id" bindtap="onNoticeTap" data-notice="{{item}}">
      <!-- é€šçŸ¥å¤´éƒ¨ -->
      <view class="notice-header">
        <view class="notice-type {{item.type}}">
          <text class="type-icon">{{item.typeIcon}}</text>
          <text class="type-text">{{item.typeName}}</text>
        </view>
        <view class="notice-status">
          <text class="status-text {{item.isRead ? 'read' : 'unread'}}">
            {{item.isRead ? 'å·²è¯»' : 'æœªè¯»'}}
          </text>
        </view>
      </view>

      <!-- é€šçŸ¥å†…å®¹ -->
      <view class="notice-content">
        <text class="notice-title">{{item.title}}</text>
        <text class="notice-summary">{{item.summary}}</text>
      </view>

      <!-- é€šçŸ¥å…ƒä¿¡æ¯ -->
      <view class="notice-meta">
        <view class="meta-item">
          <text class="meta-icon">ğŸ“…</text>
          <text class="meta-text">{{item.publishTime}}</text>
        </view>
        <view class="meta-item">
          <text class="meta-icon">ğŸ‘¤</text>
          <text class="meta-text">{{item.publisher}}</text>
        </view>
        <view class="meta-item" wx:if="{{item.priority === 'high'}}">
          <text class="priority-tag">é‡è¦</text>
        </view>
      </view>

      <!-- æœªè¯»æ ‡è¯† -->
      <view class="unread-dot" wx:if="{{!item.isRead}}"></view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{notices.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ“¢</text>
      <text class="empty-text">æš‚æ— é€šçŸ¥</text>
      <text class="empty-desc">å½“å‰æ²¡æœ‰æ–°çš„ç¤¾åŒºé€šçŸ¥</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-actions">
    <view class="action-btn" bindtap="onMarkAllRead">
      <text class="action-icon">âœ“</text>
      <text class="action-text">å…¨éƒ¨å·²è¯»</text>
    </view>
    <view class="action-btn" bindtap="onRefresh">
      <text class="action-icon">ğŸ”„</text>
      <text class="action-text">åˆ·æ–°</text>
    </view>
  </view>
</view>